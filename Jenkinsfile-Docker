#!/usr/bin/env groovy

pipeline { 
    agent any
     environment {
         ANS_PATH = "/var/lib/jenkins/workspace/Docker/Jenkinsfile-Docker"
         ANS_KEY = credentials("ansible_key")
    }
    stages {
        stage('Build and Push Image') {
            steps { 
                sh ''
                sh 'docker --version'
                sh 'ls'
                sh 'pwd'
                sh 'cd docker'
                sh 'aws ecr get-login-password --region eu-central-1 | docker login --username AWS --password-stdin 519637832355.dkr.ecr.eu-central-1.amazonaws.com'
                sh 'docker build -t your_repository_name'
            }
        }
     }
        
}